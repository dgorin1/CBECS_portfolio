# conf/config.yaml
data:
  raw_dir: "data/raw"
  processed_dir: "data/processed"

datasets:
  year: 2018
  data_url: "https://www.eia.gov/consumption/commercial/data/2018/xls/cbecs2018_final_public.csv"
  codebook_url: https://www.eia.gov/consumption/commercial/data/2018/xls/2018microdata_codebook.xlsx


target:
  name: "MFBTU"
  log_name: "LOG_MFBTU"
  drop_na: true   # drop rows with missing target before anything else

drops:
  leakage_risks: ["MFEXP","ELBTU","ELCNS","ELEXP","NGBTU","NGCNS","NGEXP",
                  "MFHTBTU","MFCLBTU","MFVNBTU","MFWTBTU","MFLTBTU","MFCKBTU",
                  "MFRFBTU","MFOFBTU","MFPCBTU","MFOTBTU","ELHTBTU","ELCLBTU",
                  "ELVNBTU","ELWTBTU","ELLTBTU","ELCKBTU","ELRFBTU","ELOFBTU",
                  "ELPCBTU","ELOTBTU","NGHTBTU","NGCLBTU","NGWTBTU","NGCKBTU","NGOTBTU"]
  obvious: ["SQFTC","ELEVTR","ESCLTR","PUBID","NOCCAT","WKHRSC","NWKERC",
            "LZHRPC","LOHRPC","LNHRPC"]
  weight_regex: "FINALWT[0-9]{0,3}"   # regex of columns to drop

fillna:
  to_0: ["BASEMNT","NELVTR","NESLTR","DRYCL","RWSEAT","PBSEAT","EDSEAT","FDSEAT",
         "HCBED","RCACP_EL","PKGCP_EL","CHILP_EL","HTPCP_EL","ACWNWP_EL","EVAPP_EL",
         "OTCLP_EL","CHILP_NG","OTCLP_NG","CHILP_FK","OTCLP_FK","CHILP_PR","OTCLP_PR",
         "CHILP_ST","OTCLP_ST","CHWTP_CW","OTCLP_OT","SNACKSF","FASTFDSF","CAFSF",
         "FDPREPSF","XRAYN","RFGRSN","RFGCOMPN","RFGWIN","RFGOPN","RFGCLN","RFGVNN",
         "RFGICN","RFGSTP","PCTERMN","LAPTPN","MLTMON","TABLETN","SERVERN","LGOFFDEVN",
         "SMOFFDEVN","WBOARDSN","RGSTRN","ATMN","LTZHRP","LTOHRP","LTNHRP","BULBP",
         "HALOP","HIDP","LEDP","OTLTP","PKLTN","DAYLTP"]
  to_1: ["RENOV","FACDST","FACDHW","FACDCW","FACELC"]
  to_2: ["VACANT","DRVTHRU"]

recode:
  single_value:
    # map special → replacement (top-code caps etc.)
    NELVTR: {sentinel: 995, replace: 30}
    NESLTR: {sentinel: 995, replace: 10}
    BASEMNT: {sentinel: 995, replace: 5}
    FLCEILHT: {sentinel: 995, replace: 50}
    RWSEAT: {sentinel: 99995, replace: 2000}
    PBSEAT: {sentinel: 99995, replace: 15000}
    HCBED: {sentinel: 9995, replace: 250}
  # multi-coded special values that need featureization
  nfloor:
    mid_code: 994
    top_code: 995
    mid_replace: 12
    top_replace: 15
    add_bins: true   # add NFLOOR_10_14_BIN & NFLOOR_TOP_BIN

one_off_fixes:
  # DRVTHRU: code 5 (“don’t know”) → 2 (“no”)
  recode_equal:
    DRVTHRU: {5: 2}

impute_median_with_flag: ["OCCUPYP"]   # median-impute + add *_IMPUTED flag

domain_rules:
  # HCBED applicable only for hospital/nursing PBA ∈ {16,17}
  hcbeds:
    col: "HCBED"
    pba_col: "PBA"
    applicable_values: [16]

engineer:
  seats:
    cols: ["RWSEAT","PBSEAT","EDSEAT","FDSEAT"]
    keep_top_flags: ["RWSEAT_TOPCODED","PBSEAT_TOPCODED"]
    out_total: "SEATS_TOTAL"
    out_top_any: "SEATS_TOPCODED"

post:
  # optional: after all rules, drop columns over missing threshold
  drop_missing_threshold: 0.9   # 0.9 means keep columns with >=10% non-null

categorical:
  - REGION
  - CENDIV
  - PBA
  - PUBCLIM
  - SQFTC
  - WLCNS
  - RFCNS
  - RFCOOL
  - RFTILT
  - BLDSHP
  - GLSSPC
  - YRCONC
  - PBAPLUS
  - WKHRSC
  - NWKERC
  - NOCCAT
  - OWNTYPE
  - GOVOWN
  - GOVTYP
  - OWNOCC
  - OPNMF
  - OPNWE
  - OPEN24
  - MAINHT
  - MAINCL
  - EMCS
  - EMCSHT
  - EMCSCL
  - EMCSLT
  - SMRTTHRM
  - HWRDHT
  - HWRDCL
  - VAV
  - DOAS
  - DCV
  - ECN
  - MAINT
  - WTHTEQ
  - BOOSTWT
  - SRVUNIT
  - SERVERC
  - PCTRMC
  - LAPTPC
  - DCNTRSFC
  - TRNGRM
  - STDNRM
  - LGOFFDEV
  - SMOFFDEV
  - WBOARDS
  - TVVIDEO
  - RGSTR
  - LZHRPC
  - LOHRPC
  - LNHRPC
  - LIT
  - FLUOR
  - CFLR
  - BULB
  - HALO
  - HID
  - LED
  - OTLT
  - SCHED
  - OCSN
  - DIM
  - DAYHARV
  - TRIM
  - PLGCTRL
  - DRLGHT
  - LTEXPC
  - PKLT
  - PKLTINOUT
  - WINTYP
  - TINT
  - REFL
  - AWN
  - SKYLT
  - MFUSED
  - DHUSED
  - DHHT1
  - DHHT2
  - DHCOOL
  - DHWATR
  - DHCOOK
  - DHMANU
  - DHOTH
  - HT1
  - HT2
  - COOL
  - WATR
  - COOK
  - MANU
  - EGYUSED
  - ELUSED
  - NGUSED
  - FKUSED
  - PRUSED
  - STUSED
  - HWUSED
  - CWUSED
  - WOUSED
  - COUSED
  - SOUSED
  - OTUSED
  - FKTYPE
  - SOPANEL
  - SOTHERM
  - ELHT1
  - NGHT1
  - FKHT1
  - PRHT1
  - STHT1
  - HWHT1
  - WOHT1
  - COHT1
  - SOHT1
  - OTHT1
  - ELHT2
  - NGHT2
  - FKHT2
  - PRHT2
  - STHT2
  - HWHT2
  - WOHT2
  - COHT2
  - SOHT2
  - OTHT2
  - PKGHT
  - FURNAC
  - SLFCON
  - BOILER
  - HTPMPH
  - STHW
  - REHEAT
  - FIREPLC
  - OTHTEQ
  - PKGHT_EL
  - BOILER_EL
  - HTPMPH_EL
  - FURNAC_EL
  - SLFCON_EL
  - FIREPLC_EL
  - REHEAT_EL
  - OTHTEQ_EL
  - PKGHT_NG
  - BOILER_NG
  - HTPMPH_NG
  - FURNAC_NG
  - SLFCON_NG
  - FIREPLC_NG
  - OTHTEQ_NG
  - BOILER_FK
  - FURNAC_FK
  - SLFCON_FK
  - OTHTEQ_FK
  - PKGHT_PR
  - BOILER_PR
  - HTPMPH_PR
  - FURNAC_PR
  - SLFCON_PR
  - FIREPLC_PR
  - OTHTEQ_PR
  - FURNAC_WO
  - SLFCON_WO
  - FIREPLC_WO
  - OTHTEQ_WO
  - BOILER_CO
  - FURNAC_CO
  - OTHTEQ_CO
  - SOTHERM_SO
  - PKGHT_OT
  - BOILER_OT
  - FURNAC_OT
  - SLFCON_OT
  - OTHTEQ_OT
  - DIST_ST
  - AIRHAND_ST
  - FANCOIL_ST
  - REHEAT_ST
  - RADIATR_ST
  - RADFLR_ST
  - WTLOOP_ST
  - OTDIST_ST
  - DIST_HW
  - AIRHAND_HW
  - FANCOIL_HW
  - REHEAT_HW
  - RADIATR_HW
  - RADFLR_HW
  - WTLOOP_HW
  - OTDIST_HW
  - BLRAIR
  - BLRDUCT
  - BLRFNCL
  - BLROTD
  - BLRRAD
  - BLRRDFL
  - BLRWTLP
  - CWAIR
  - CWFNCL
  - CWBEAM
  - CWWTLP
  - CWOTD
  - CHLAIR
  - CHLFNCL
  - CHLBEAM
  - CHLWTLP
  - CHLOTD
  - CHLAIRCL
  - CHLWTRCL
  - CHLABSRP
  - PKGHPH
  - HPHPTHP
  - HPHAIR
  - HPHGRD
  - HPHDUAL
  - HPHWTR
  - HPHVRF
  - SPHTPTHP
  - HPCPTHP
  - HPCAIR
  - HPCGRD
  - HPCDUAL
  - HPCWTR
  - ACVRF
  - RMACPTHP
  - MLTMON
  - MLTMNC
  - TABCHRG
  - SRVRCLST
  - DATACNTR
  - DRYCL
  - VACANT
  - COURT
  - FACIL
  - FEDFAC
  - FACACT
  - MANIND
  - PLANT
  - FACDST
  - FACDHW
  - FACDCW
  - FACELC
  - BLDPLT
  - RENOV
  - RENCOS
  - RENADD
  - RENRDC
  - RENINT
  - RENRFF
  - RENWIN
  - RENHVC
  - RENLGT
  - RENPLB
  - RENELC
  - RENINS
  - RENSAF
  - RENSTR
  - RENOTH
  - DRVTHRU
  - CONFSP
  - MEDEQP
  - CTSCAN
  - MRI
  - LINACC
  - OUTSURG
  - LABEQP
  - MCHEQP
  - POOL
  - HTPOOL
  - STRLZR
  - RFGEQP
  - RFGRES
  - RFGCOMP
  - RFGWI
  - RFGOP
  - RFGCL
  - RFGVEN
  - RFGICE
  - RFGSTO
  - WHRECOV
  - WHHT2
  - WHWT
  - WHOT
  - ENRGYPLN
  - SNACK
  - FASTFD
  - CAF
  - FDPREP
  - KITCHN
  - BREAKRM
  - OTFDRM
  - HWTRM
  - LAUNDR
  - CONFSP
  - CAPGEN
  - PVC
  - ENGINE
  - FUELCL
  - LRGTRB
  - MCROTB
  - OTGENTECH
  - COGEN
  - NGGENR
  - FKGENR
  - PRGENR
  - WOGENR
  - COGENR
  - SOGENR
  - OTGENR
  - GENUSE
  - GENGT1MW
  - NGOTH
  - FKOTH
  - PROTH
  - STOTH
  - HWOTH
  - CWOTH
  - WOOTH
  - COOTH
  - SOOTH
  - OTOTH
  - PRUNIT

numeric:
  - SQFT
  - NFLOOR
  - BASEMNT
  - FLCEILHT
  - NELVTR
  - NESLTR
  - MONUSE
  - OCCUPYP
  - LODOCCP
  - WKHRS
  - NWKER
  - HEATP
  - COOLP
  - PCTERMN
  - LAPTPN
  - TABLETN
  - SERVERN
  - LGOFFDEVN
  - SMOFFDEVN
  - WBOARDSN
  - TVVIDEON
  - RGSTRN
  - ATMN
  - LTZHRP
  - LTOHRP
  - LTNHRP
  - FLUORP
  - CFLRP
  - BULBP
  - HALOP
  - HIDP
  - LEDP
  - OTLTP
  - PKLTN
  - DAYLTP
  - HDD65
  - CDD65
  - NOCC
  - RWSEAT
  - PBSEAT
  - EDSEAT
  - FDSEAT
  - HCBED
  - NRSBED
  - LODGRM
  - SNACKSF
  - FASTFDSF
  - CAFSF
  - FDPREPSF
  - RFGRSN
  - RFGCOMPN
  - RFGWIN
  - RFGOPN
  - RFGCLN
  - RFGVNN
  - RFGICN
  - RFGSTP
  - CONFSPP
  - FURNP_EL
  - PKGHP_EL
  - BOILP_EL
  - HTPHP_EL
  - SLFCNP_EL
  - FIREPLP_EL
  - REHEATP_EL
  - OTHTP_EL
  - FURNP_NG
  - PKGHP_NG
  - BOILP_NG
  - HTPHP_NG
  - SLFCNP_NG
  - FIREPLP_NG
  - OTHTP_NG
  - FURNP_FK
  - BOILP_FK
  - SLFCNP_FK
  - OTHTP_FK
  - FURNP_PR
  - PKGHP_PR
  - BOILP_PR
  - HTPHP_PR
  - SLFCNP_PR
  - FIREPLP_PR
  - OTHTP_PR
  - STHWP_ST
  - STHWP_HW
  - FURNP_WO
  - SLFCNP_WO
  - FIREPLP_WO
  - OTHTP_WO
  - FURNP_CO
  - BOILP_CO
  - OTHTP_CO
  - SOTHERMP_SO
  - FURNP_OT
  - PKGHP_OT
  - BOILP_OT
  - SLFCNP_OT
  - OTHTP_OT
  - RCACP_EL
  - PKGCP_EL
  - CHILP_EL
  - HTPCP_EL
  - ACWNWP_EL
  - EVAPP_EL
  - OTCLP_EL
  - CHILP_NG
  - OTCLP_NG
  - CHILP_FK
  - OTCLP_FK
  - CHILP_PR
  - OTCLP_PR
  - CHILP_ST
  - OTCLP_ST
  - CHWTP_CW
  - OTCLP_OT
  - PRAMTC
  - WOAMT
  - WOEXP
  - WOEXPC
  - MFBTU
  - MFEXP
  - ELBTU
  - ELCNS
  - ELEXP
  - NGBTU
  - NGCNS
  - NGEXP
  - FKBTU
  - FKCNS
  - FKEXP
  - DHBTU
  - DHEXP
  - MFHTBTU
  - MFCLBTU
  - MFVNBTU
  - MFWTBTU
  - MFLTBTU
  - MFCKBTU
  - MFRFBTU
  - MFOFBTU
  - MFPCBTU
  - MFOTBTU
  - ELHTBTU
  - ELCLBTU
  - ELVNBTU
  - ELWTBTU
  - ELLTBTU
  - ELCKBTU
  - ELRFBTU
  - ELOFBTU
  - ELPCBTU
  - ELOTBTU
  - NGHTBTU
  - NGCLBTU
  - NGWTBTU
  - NGCKBTU
  - NGOTBTU
  - FKHTBTU
  - FKCLBTU
  - FKWTBTU
  - FKCKBTU
  - FKOTBTU
  - DHHTBTU
  - DHCLBTU
  - DHWTBTU
  - DHCKBTU
  - DHOTBTU
  - FINALWT
  - FINALWT1
  - FINALWT2
  - FINALWT3
  - FINALWT4
  - FINALWT5
  - FINALWT6
  - FINALWT7
  - FINALWT8
  - FINALWT9
  - FINALWT10
  - FINALWT11
  - FINALWT12
  - FINALWT13
  - FINALWT14
  - FINALWT15
  - FINALWT16
  - FINALWT17
  - FINALWT18
  - FINALWT19
  - FINALWT20
  - FINALWT21
  - FINALWT22
  - FINALWT23
  - FINALWT24
  - FINALWT25
  - FINALWT26
  - FINALWT27
  - FINALWT28
  - FINALWT29
  - FINALWT30
  - FINALWT31
  - FINALWT32
  - FINALWT33
  - FINALWT34
  - FINALWT35
  - FINALWT36
  - FINALWT37
  - FINALWT38
  - FINALWT39
  - FINALWT40
  - FINALWT41
  - FINALWT42
  - FINALWT43
  - FINALWT44
  - FINALWT45
  - FINALWT46
  - FINALWT47
  - FINALWT48
  - FINALWT49
  - FINALWT50
  - FINALWT51
  - FINALWT52
  - FINALWT53
  - FINALWT54
  - FINALWT55
  - FINALWT56
  - FINALWT57
  - FINALWT58
  - FINALWT59
  - FINALWT60
  - FINALWT61
  - FINALWT62
  - FINALWT63
  - FINALWT64
  - FINALWT65
  - FINALWT66
  - FINALWT67
  - FINALWT68
  - FINALWT69
  - FINALWT70
  - FINALWT71
  - FINALWT72
  - FINALWT73
  - FINALWT74
  - FINALWT75
  - FINALWT76
  - FINALWT77
  - FINALWT78
  - FINALWT79
  - FINALWT80
  - FINALWT81
  - FINALWT82
  - FINALWT83
  - FINALWT84
  - FINALWT85
  - FINALWT86
  - FINALWT87
  - FINALWT88
  - FINALWT89
  - FINALWT90
  - FINALWT91
  - FINALWT92
  - FINALWT93
  - FINALWT94
  - FINALWT95
  - FINALWT96
  - FINALWT97
  - FINALWT98
  - FINALWT99
  - FINALWT100
  - FINALWT101
  - FINALWT102
  - FINALWT103
  - FINALWT104
  - FINALWT105
  - FINALWT106
  - FINALWT107
  - FINALWT108
  - FINALWT109
  - FINALWT110
  - FINALWT111
  - FINALWT112
  - FINALWT113
  - FINALWT114
  - FINALWT115
  - FINALWT116
  - FINALWT117
  - FINALWT118
  - FINALWT119
  - FINALWT120
  - FINALWT121
  - FINALWT122
  - FINALWT123
  - FINALWT124
  - FINALWT125
  - FINALWT126
  - FINALWT127
  - FINALWT128
  - FINALWT129
  - FINALWT130
  - FINALWT131
  - FINALWT132
  - FINALWT133
  - FINALWT134
  - FINALWT135
  - FINALWT136
  - FINALWT137
  - FINALWT138
  - FINALWT139
  - FINALWT140
  - FINALWT141
  - FINALWT142
  - FINALWT143
  - FINALWT144
  - FINALWT145
  - FINALWT146
  - FINALWT147
  - FINALWT148
  - FINALWT149
  - FINALWT150
  - FINALWT151